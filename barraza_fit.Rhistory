source("data_io.R")

df <- read_csv_data(data_url)
library(minpack.lm)
len_subset <- length(df$date)-31+1
data <- list("M" = len_subset, "x" = c(1:len_subset),"Y" = df$Italy[31:length(df$Italy)])
nlm <- nlsLM(Y ~ 1/b * ((1 + a * x)^b - 1), data=data, start=list(a=0.1, b=1))
coefs <- coef(nlm)
plot(Y ~ x,data=data,type='l')
lines(0:100, predict(nlm, newdata = data.frame(x = 0:100)), col='red')
